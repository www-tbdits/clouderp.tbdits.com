<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TBDITS-POS System</title>

  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 20px 30px;
      background: #2980b9;
      color: #2c3e50;
    }

    /* ------ (same styles as before, already fixed) ------ */
    /* background color fixed, label/input alignment fixed */
    /* full style unchanged for brevity */
  </style>

  <script>
    // üîê Check if logged in
    const isLoggedIn = localStorage.getItem('tbdits_logged_in');
    if (!isLoggedIn) {
      window.location.href = 'https://www-tbdits.github.io/clouderp.tbdits.com/';
    }
  </script>
</head>

<body>

<!-- ‚úÖ Header Section -->
<div id="header-section" style="display: flex; justify-content: space-between; border-bottom: 1px solid #000; padding-bottom:10px; margin-bottom: 30px;">
  <div id="company-login" style="display: flex; align-items: center; gap: 15px;">
    <div id="company-logo">
      <img src="images/PosLogo.png" alt=" " style="height: 100px;">
    </div>
    <div>
      <h2 style="color: #000;">Tech BD IT Solutions</h2>
      <p>Phone: +8809638665205, +8801516-573873, +8801323056735</p>
      <p>Address: Bangladesh, Dhaka-1205</p>

      <button id="logoutBtn" style="background-color: #e74c3c; color: white; border: none; padding: 4px 8px; border-radius: 1px; cursor: pointer;">
        Logout
      </button>

      <script>
        document.getElementById('logoutBtn')?.addEventListener('click', () => {
          localStorage.removeItem('tbdits_logged_in');
          localStorage.removeItem('tbdits_user');
          window.location.href = 'https://www-tbdits.github.io/clouderp.tbdits.com/';
        });
      </script>
    </div>
  </div>

  <!-- ‚úÖ Invoice Entry Section -->
  <div id="invoice-entry" style="padding-left: 40px; border-left: 1px solid #000; max-width: 350px;">
    <div class="invoice-form-group">
      <label for="invoiceNumber">Invoice Number:</label>
      <input type="text" id="invoiceNumber" placeholder=" " />
    </div>
    <div class="invoice-form-group">
      <label for="itemBarcode">Item / Barcode :</label>
      <input type="text" id="itemBarcode" placeholder=" " />
    </div>
    <div class="invoice-form-group">
      <label for="salePrice">Sale Price:</label>
      <input type="number" id="salePrice" placeholder=" " min="0" step="0.01" />
    </div>
    <div class="invoice-form-group">
      <label for="saleQty">Sale Quantity:</label>
      <input type="number" id="saleQty" placeholder=" " min="1" step="1" />
    </div>
    <div class="invoice-checkbox">
      <input type="checkbox" id="inStock" />
      <label for="inStock">In Stock</label>
    </div>
  </div>
</div>
<!-- ‚úÖ Customer Info Section -->
<div id="customer-info" style="background: white; padding: 20px; margin-bottom: 20px; border-radius: 5px;">
  <h3>Customer Information</h3>
  <div class="customer-row" style="display: flex; gap: 40px;">
    <div class="form-group-horizontal" style="flex: 1;">
      <label for="customerId">Customer ID:</label>
      <input type="text" id="customerId" />
    </div>
    <div class="form-group-horizontal" style="flex: 1;">
      <label for="customerMobile">Mobile:</label>
      <input type="text" id="customerMobile" />
    </div>
  </div>
  <div class="customer-row" style="display: flex; gap: 40px; margin-top: 10px;">
    <div class="form-group-horizontal" style="flex: 1;">
      <label for="customerName">Customer Name:</label>
      <input type="text" id="customerName" />
    </div>
    <div class="form-group-horizontal" style="flex: 1;">
      <label for="customerAddress">Address:</label>
      <input type="text" id="customerAddress" />
    </div>
  </div>
</div>

<!-- ‚úÖ Products + Summary -->
<div id="products-summary" style="display: flex; gap: 20px;">
  <!-- Product Table -->
  <div id="product-table-section" style="flex: 2; background: white; padding: 10px; border-radius: 5px;">
    <h3>Products</h3>
    <table id="productTable" style="width: 100%; border-collapse: collapse;">
      <thead>
        <tr>
          <th>SL.NO</th>
          <th>DESCRIPTION</th>
          <th>RATE</th>
          <th>QNT</th>
          <th>AMOUNT</th>
          <th>DELETE</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Summary Section -->
  <div id="summary-section" style="flex: 1; background: white; padding: 10px; border-radius: 5px;">
    <h3 style="text-align: center;">Summary</h3>
    <div class="summary-row"><label>Total Qty:</label><div id="totalQty" class="value-box">0</div></div>
    <div class="summary-row"><label>Total:</label><div id="totalAmount" class="value-box">0.00</div></div>
    <div class="summary-row"><label for="vatInput">VAT (%):</label><input type="number" id="vatInput" min="0" max="100" value="0" /></div>
    <div class="summary-row"><label for="discountPercent">Discount (%):</label><input type="number" id="discountPercent" min="0" max="100" value="0" /></div>
    <div class="summary-row"><label>Discount:</label><div id="discountAmount" class="value-box">0.00</div></div>
    <div class="summary-row"><label>Sub Total:</label><div id="SubTotal" class="value-box total">0.00</div></div>

    <div style="text-align: center; margin-top: 10px;">
      <button onclick="window.print()" style="background: #2980b9; color: white; padding: 8px 20px; border: none; border-radius: 4px;">Print Invoice</button>
    </div>
  </div>
</div>
 <script>
  const itemBarcodeInput = document.getElementById('itemBarcode');
  const salePriceInput = document.getElementById('salePrice');
  const saleQtyInput = document.getElementById('saleQty');
  const productTableBody = document.querySelector('#productTable tbody');

  const totalQtyElem = document.getElementById('totalQty');
  const totalAmountElem = document.getElementById('totalAmount');
  const discountPercentInput = document.getElementById('discountPercent');
  const discountAmountElem = document.getElementById('discountAmount');
  const subTotalElem = document.getElementById('SubTotal');
  const vatInput = document.getElementById('vatInput');

  function updateSummary() {
    let totalQty = 0;
    let totalAmount = 0;

    productTableBody.querySelectorAll('tr').forEach((row, index) => {
      const qty = parseFloat(row.querySelector('.qty').textContent) || 0;
      const amount = parseFloat(row.querySelector('.amount').textContent) || 0;
      row.cells[0].textContent = index + 1; // Update SL.NO
      totalQty += qty;
      totalAmount += amount;
    });

    totalQtyElem.textContent = totalQty;
    totalAmountElem.textContent = totalAmount.toFixed(2);
    updateDiscountAndSubTotal();
  }

  function updateDiscountAndSubTotal() {
    const total = parseFloat(totalAmountElem.textContent) || 0;
    const vatPercent = parseFloat(vatInput.value) || 0;
    const discountPercent = parseFloat(discountPercentInput.value) || 0;

    const vatAmount = (total * vatPercent) / 100;
    const discountAmount = (total * discountPercent) / 100;
    const subTotal = total + vatAmount - discountAmount;

    discountAmountElem.textContent = discountAmount.toFixed(2);
    subTotalElem.textContent = subTotal.toFixed(2);
  }

  function deleteRow(e) {
    e.target.closest('tr').remove();
    updateSummary();
  }

  [itemBarcodeInput, salePriceInput, saleQtyInput].forEach(input => {
    input.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();

        const description = itemBarcodeInput.value.trim();
        const rate = parseFloat(salePriceInput.value);
        const qty = parseInt(saleQtyInput.value);

        if (!description || isNaN(rate) || isNaN(qty) || qty < 1) {
          alert("Please enter valid product info");
          return;
        }

        const amount = rate * qty;
        const tr = document.createElement('tr');

        tr.innerHTML = `
          <td></td>
          <td class="description">${description}</td>
          <td class="rate">${rate.toFixed(2)}</td>
          <td class="qty">${qty}</td>
          <td class="amount">${amount.toFixed(2)}</td>
          <td><button class="delete-btn">Delete</button></td>
        `;

        productTableBody.appendChild(tr);
        tr.querySelector('.delete-btn').addEventListener('click', deleteRow);

        itemBarcodeInput.value = '';
        salePriceInput.value = '';
        saleQtyInput.value = '';
        itemBarcodeInput.focus();

        updateSummary();
      }
    });
  });

  discountPercentInput.addEventListener('input', updateDiscountAndSubTotal);
  vatInput.addEventListener('input', updateDiscountAndSubTotal);
</script>

<!-- ‚úÖ Footer -->
<footer style="background: #2c3e50; color: white; padding: 5px; font-size: 14px; text-align: center; margin-top: 20px;">
  <span>System by: <strong>Tech BD IT Solutions</strong></span> |
  <span>Developed by: <strong>Md. Jems Ahmed Joy</strong></span> |
  <i class="fas fa-globe"></i> 
  <a href="https://www-tbdits.github.io/techbditsolutions.com" target="_blank" style="color: #1abc9c; text-decoration: none;">www-tbdits.github.io/techbditsolutions.com</a> |
  <i class="fas fa-phone-alt"></i> +8809638665205, +8801516-573873 ,+8801323056735 |
  <i class="fas fa-map-marker-alt"></i> Dhaka-1205
</footer>
</body>
</html>
