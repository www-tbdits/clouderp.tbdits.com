<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cloud POS Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
<style>
  body {
    font-family: 'Roboto', sans-serif;
    background: #f4f7fc;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  header {
    background: #3742a1;
    color: #fff;
    padding: 15px 25px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 10;
  }

  header img { height: 52px; border-radius: 8px; }
  header .company-name { font-size: 30px; font-weight: 700; margin-left: 10px; }

  main {
    flex: 1;
    display: flex;
    gap: 20px;
    justify-content: flex-start;
    align-items: stretch;
    padding: 0;
    margin-top: 70px;
    margin-bottom: 20px;
  }

  .icon-grid {
    display: grid;
    gap: 10px;
    justify-items: center;
    align-items: center;
  }

  /* Full access users grid (jems) */
  .icon-grid.full-access {
    grid-template-columns: repeat(2, 150px);
  }

  /* Partial permission users grid */
  .icon-grid.partial-access {
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  }

  .icon-card {
    background: none;
    padding: 20px;
    border-radius: 100px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .icon-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 10px rgba(0,0,0,0.15);
  }

  .icon-card i { font-size: 36px; color: #4f46e5; margin-bottom: 10px; }
  .icon-card span { font-weight: 600; color: #333; text-align: center; }

  .image-box {
    flex: 1;
    background-image: url('images/BG.png');
    background-size: cover;
    background-position: center;
    border-radius: 12px;
    border: 2px solid #4f46e5;
    box-shadow: 0 4px 0 3px rgba(0,0,0,0.1);
  }

  footer {
    background: #4f46e5;
    color: white;
    text-align: center;
    padding: 15px 25px;
    font-weight: 500;
    box-shadow: 0 -4px 10px rgba(0,0,0,0.1);
    position: fixed;
    bottom: 0;
    width: 100%;
  }

  @media (max-width: 900px) {
    main {
      flex-direction: column;
      align-items: center;
      padding: 120px 10px 100px;
    }
    .icon-grid.full-access {
      grid-template-columns: repeat(1, 200px);
      gap: 20px;
    }
    .icon-grid.partial-access {
      grid-template-columns: repeat(1, 200px);
      gap: 10px;
    }
    .image-box {
      width: 100%;
      min-height: 250px;
      margin-top: 20px;
    }
  }
</style>
</head>
<body>

<script>
  // Check login
  const loggedInUser = JSON.parse(localStorage.getItem('tbdits_user'));
  if (!loggedInUser) {
    window.location.replace('https://www-tbdits.github.io/cloudpos.tbdits.com/');
  }
</script>

<header>
  <div class="company-info" style="display:flex; align-items:center; width:100%; justify-content:space-between;">
    <!-- Company Logo + Name -->
    <div style="display:flex; align-items:center;">
      <img src="images/FV.png" alt="Logo" />
      <div class="company-name" style="margin-left:10px;">TECH BD IT SOLUTIONS</div>
    </div>

    <!-- User Display (Right side, but slightly left from edge) -->
    <div style="display:flex; align-items:center; gap:8px; font-weight:600; color:#fff; font-size:16px; width:820px; justify-content:flex-end; margin-right:40px;">
      <span>Welcome_</span>
      <div id="userDisplay"></div>
    </div>
  </div>
</header>


<main>
  <div class="icon-grid" id="iconGrid"></div>
  <div class="image-box"></div>
</main>

<div id="popupOverlay" style="display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.8); z-index: 9999; justify-content: center; align-items: center;">
  <div id="popupContent" style="width: 100%; height: 100%; background: #fff; position: relative; padding: 0px;">
    <button id="closePopup" style="position: absolute; top: 10px; right: 10px; font-size: 20px; background: red; color: #fff; border: none; border-radius: 5px; cursor: pointer; z-index: 1000;">X</button>
    <iframe id="popupIframe" src="" style="width:100%; height:100%; border:none;"></iframe>
  </div>
</div>

<script>
  const userDisplay = document.getElementById('userDisplay');
  if(loggedInUser) userDisplay.textContent = loggedInUser.username;

  const features = [
    { id: 'reports', label: 'Sales Reports', icon: 'bx bxs-file', link: 'reports.html' },
    { id: 'sales', label: 'Sales of Point', icon: 'bx bxs-cart', link: 'ColudPOS.html' },
    { id: 'customers', label: 'Customers', icon: 'bx bxs-user', link: 'customers.html' },
    { id: 'products', label: 'Products', icon: 'bx bxs-box', link: 'products.html' },
    { id: 'user-permission', label: 'User Control', icon: 'bx bxs-user-check', link: 'UserControl.html' },
    { id: 'inventory', label: 'Inventory', icon: 'bx bxs-data', link: 'inventory.html' },
    { id: 'help', label: 'Help', icon: 'bx bxs-help-circle', link: 'help.html' },
    { id: 'logout', label: 'Logout', icon: 'bx bxs-log-out-circle' }
  ];

  const iconGrid = document.getElementById('iconGrid');
  const popupOverlay = document.getElementById('popupOverlay');
  const popupIframe = document.getElementById('popupIframe');
  const closePopup = document.getElementById('closePopup');

  const fullAccessUsers = ['jems']; 
  const isFullAccess = fullAccessUsers.includes(loggedInUser.username);

  // Set grid class
  if(isFullAccess){
    iconGrid.classList.add('full-access');
  }else{
    iconGrid.classList.add('partial-access');
  }

  // Render icons
  iconGrid.innerHTML = '';
  features.forEach(f => {
    if(f.label !== 'Logout' && !isFullAccess && (!loggedInUser.permissions || !loggedInUser.permissions.includes(f.label))) return;

    const card = document.createElement('div');
    card.className = 'icon-card';
    card.innerHTML = `<i class='${f.icon}' style="font-size:40px;"></i><br><span>${f.label}</span>`;
    card.onclick = () => {
      if(f.id === 'logout'){
        localStorage.removeItem('tbdits_logged_in');
        localStorage.removeItem('tbdits_user');
        window.location.replace('login.html');
      } else if(f.link){
        popupIframe.src = f.link;
        popupOverlay.style.display = 'flex';
      }
    };
    iconGrid.appendChild(card);
  });

  closePopup.onclick = () => { popupOverlay.style.display = 'none'; popupIframe.src = ''; }
</script>

<footer style="background: #3742a1; color: white; padding: 5px 6px; font-size: 15px; text-align: center; margin-top:3px; border-top: 1px solid #27ae60;">
  <span>System by: <strong>Tech BD IT Solutions</strong></span> | 
  <span>Developed by: <strong>Md. Jems Ahmed Joy</strong></span>
  <i class="fas fa-globe"></i> 
  <a href="https://www-tbdits.github.io/techbditsolutions.com" target="_blank" style="color: #1abc9c; text-decoration: none;"> www.techbditsolutions.com </a> |
  <i class="fas fa-phone-alt"></i> +8809638665205, +8801516-573873 ,+8801323056735 |
  <i class="fas fa-map-marker-alt"></i> Dhaka-1205
</footer>

</body>
</html>

